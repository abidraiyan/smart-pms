
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Register Patient</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">
  <h1>Patient Registration</h1>
  <a href="index.html">← Back</a>
  <div class="grid">
    <div class="card">
      <label>Name</label>
      <input id="name" placeholder="Jane Doe">
      <label>Email</label>
      <input id="email" placeholder="jane@example.com">
      <button onclick="register()">Register</button>
      <p id="msg"></p>
      <small class="mono">POST /register</small>
    </div>
    <div class="card">
      <h3>Registered Patients</h3>
      <table id="patients"><thead><tr><th>Name</th><th>Email</th></tr></thead><tbody></tbody></table>
    </div>
  </div>
</div>
<script>
const API="http://localhost:5000";
async function register(){
  const name=document.getElementById('name').value.trim();
  const email=document.getElementById('email').value.trim();
  const msg=document.getElementById('msg');
  msg.textContent=""; msg.className="";
  const res = await fetch(API+"/register",{method:"POST", headers:{"Content-Type":"application/json"}, body:JSON.stringify({name,email})});
  const data = await res.json();
  if(res.ok){ msg.textContent="Registered "+data.patient.name; msg.className="ok"; loadPatients(); }
  else { msg.textContent=data.error||"Error"; msg.className="err"; }
}
async function loadPatients(){
  const res = await fetch(API+"/patients");
  const data = await res.json();
  const tbody=document.querySelector('#patients tbody'); tbody.innerHTML="";
  data.forEach(p=>{
    const tr=document.createElement('tr');
    tr.innerHTML=`<td>${p.name}</td><td>${p.email}</td>`;
    tbody.appendChild(tr);
  });
}
loadPatients();
</script>
</body>
</html>
